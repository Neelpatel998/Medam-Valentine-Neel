<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Medam ğŸ’˜</title>

  <style>
    body{
      font-family: Arial, sans-serif;
      background:#fff5f7;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
      margin:0;
      text-align:center;
    }
    .card{
      background:white;
      padding:22px;
      border-radius:16px;
      box-shadow:0 10px 30px rgba(0,0,0,0.12);
      width:92%;
      max-width:380px;
      position: relative;
      overflow:hidden;
    }
    img{
      width:100%;
      border-radius:14px;
      display:block;
    }
    h2{ margin:14px 0 6px; }
    .sub{ font-size:14px; opacity:.75; margin:0 0 10px; }

    .buttons{
      margin-top:16px;
      position:relative;
      height:92px;
    }
    button{
      padding:12px 22px;
      font-size:16px;
      border-radius:12px;
      border:none;
      cursor:pointer;
      user-select:none;
      transition: transform 0.15s ease;
      white-space: nowrap;
    }

    #yes{
      background:#ff4d6d;
      color:white;
      position:absolute;
      left:14px;
      top:14px;
      z-index:2;
      transform-origin:left center;
    }
    #no{
      background:#e6e6e6;
      position:absolute;
      left:210px;
      top:14px;
      z-index:3;
      transform-origin:center;
    }

    #msgLine{
      margin-top:12px;
      font-size:14px;
      opacity:0.92;
      min-height:24px;
    }

    /* Fake loading bar */
    .barWrap{
      margin:10px auto 0;
      width:92%;
      height:10px;
      background:#f1f1f1;
      border-radius:999px;
      overflow:hidden;
      display:none;
    }
    .bar{
      height:100%;
      width:0%;
      background:#ff4d6d;
      border-radius:999px;
      transition: width 0.35s ease;
    }

    /* Wife Approval popup */
    .overlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.5);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:999;
    }
    .popup{
      width:min(92vw, 360px);
      background:white;
      border-radius:16px;
      padding:18px;
      text-align:left;
      box-shadow:0 10px 30px rgba(0,0,0,0.2);
    }
    .popup h3{
      margin:0 0 8px;
      font-size:16px;
    }
    .popup p{
      margin:0 0 12px;
      font-size:14px;
      opacity:0.9;
    }
    .popup .row{
      display:flex;
      gap:10px;
      justify-content:flex-end;
    }
    .miniBtn{
      padding:10px 14px;
      border-radius:12px;
      border:none;
      cursor:pointer;
      font-size:14px;
    }
    .miniBtn.primary{
      background:#ff4d6d;
      color:white;
    }
    .miniBtn.gray{
      background:#e6e6e6;
    }

    /* Toast (shown only AFTER YES) */
    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      background:rgba(0,0,0,0.85);
      color:#fff;
      padding:12px 14px;
      border-radius:14px;
      font-size:13px;
      z-index:1000;
      display:none;
      text-align:center;
      max-width:92vw;
      box-shadow:0 8px 20px rgba(0,0,0,0.25);
      pointer-events:none; /* never blocks content */
    }
    .toast b{ color:#ffd6e0; }

    /* Hearts & Flowers */
    .floaty{
      position:absolute;
      font-size:20px;
      animation: fall 1.6s linear forwards;
      top:-22px;
      z-index: 5;
    }
    @keyframes fall{
      to{ transform: translateY(560px) rotate(360deg); opacity:0; }
    }

    /* Final footer badge (only on YES screen) */
    .finalBadge{
      margin-top:12px;
      display:inline-block;
      background:#111;
      color:#fff;
      padding:10px 12px;
      border-radius:14px;
      font-size:13px;
      opacity:0.92;
      cursor:pointer;
      user-select:none;
    }
    .finalBadge b{ color:#ffd6e0; }
  </style>
</head>

<body>

  <div class="overlay" id="overlay">
    <div class="popup">
      <h3>ğŸ“ Wife Approval Department</h3>
      <p>
        Hello Medam ğŸ‘‘<br>
        We received a request to press <b>NO</b>.<br>
        This request has been <b>REJECTED</b> âœ…
      </p>
      <p style="font-size:13px;opacity:.8;">
        Reason: â€œHeâ€™s your husband. Annoying, but yours.â€ ğŸ˜‚
      </p>
      <div class="row">
        <button class="miniBtn gray" onclick="closePopup()">Fine ğŸ™„</button>
        <button class="miniBtn primary" onclick="forceYes()">Press YES ğŸ˜Œ</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">
    ğŸ“¸ Screenshot detected ğŸ‘€<br>
    <b>Neel wins confirmed</b> ğŸ˜ğŸ‘‘
  </div>

  <div class="card" id="card">
    <img src="./Neel 1.jpeg" alt="Meme">

    <h2>Medam, be my Valentine? ğŸ’˜</h2>
    <p class="sub">Wife edition. Choose wisely ğŸ‘‘ğŸ˜Œ</p>

    <div class="buttons" id="btnArea">
      <button id="yes" onclick="yesClicked()">Yes â¤ï¸</button>
      <button id="no" onmouseover="tryNo()" onclick="tryNo()">No ğŸ˜</button>
    </div>

    <div class="barWrap" id="barWrap">
      <div class="bar" id="bar"></div>
    </div>

    <div id="msgLine">Try pressing NOâ€¦ if you dare ğŸ˜ˆ</div>
  </div>

<script>
  const card = document.getElementById("card");
  const btnArea = document.getElementById("btnArea");
  const yesBtn = document.getElementById("yes");
  const noBtn  = document.getElementById("no");
  const msg    = document.getElementById("msgLine");
  const barWrap= document.getElementById("barWrap");
  const bar    = document.getElementById("bar");
  const overlay= document.getElementById("overlay");
  const toast  = document.getElementById("toast");

  let tries = 0;
  let yesScale = 1;
  let noX = 0, noY = 0;
  let popupShown = false;

  // Screenshot toast + triggers only AFTER YES (as you requested)
  let screenshotMode = false;

  const lines = [
    "Wrong button ğŸ˜‚",
    "Medamâ€¦ youâ€™re literally my wife ğŸ˜­",
    "You said NO? Iâ€™m telling your mom ğŸ¥²",
    "NO detected ğŸš¨ starting husband apology protocolâ€¦",
    "Ok ok you were right (again) ğŸ˜Œ",
    "If you press NO againâ€¦ shopping cart doubles ğŸ›’ğŸ˜‚",
    "Final warning: Iâ€™m cooking dinner ğŸ˜­ğŸ”¥",
    "Queen pleaseâ€¦ YES only ğŸ‘‘â¤ï¸"
  ];

  function vibrate(pattern){
    try{ if (navigator.vibrate) navigator.vibrate(pattern); }catch(e){}
  }

  function spawnEmoji(emoji){
    const el = document.createElement("div");
    el.className = "floaty";
    el.innerText = emoji;
    el.style.left = (Math.random()*320) + "px";
    el.style.opacity = (0.65 + Math.random()*0.35);
    card.appendChild(el);
    setTimeout(() => el.remove(), 1700);
  }

  function spawnHearts(n=18){
    const arr = ["ğŸ’–","ğŸ’˜","ğŸ’•","â¤ï¸","ğŸ˜","ğŸ˜˜","ğŸ‘‘","ğŸ›’"];
    for(let i=0;i<n;i++) setTimeout(()=>spawnEmoji(arr[Math.floor(Math.random()*arr.length)]), i*22);
  }

  function spawnFlowers(n=14){
    const arr = ["ğŸŒ¹","ğŸ’","ğŸŒ¸","ğŸŒº","ğŸŒ·"];
    for(let i=0;i<n;i++) setTimeout(()=>spawnEmoji(arr[Math.floor(Math.random()*arr.length)]), i*26);
  }

  function clampNoInside() {
    const area = btnArea.getBoundingClientRect();
    const nb = noBtn.getBoundingClientRect();

    const minLeft = area.left + 8;
    const maxLeft = area.right - nb.width - 8;
    const minTop  = area.top + 6;
    const maxTop  = area.bottom - nb.height - 6;

    let dx = 0, dy = 0;

    if (nb.left < minLeft) dx = (minLeft - nb.left);
    if (nb.left > maxLeft) dx = (maxLeft - nb.left);
    if (nb.top  < minTop)  dy = (minTop - nb.top);
    if (nb.top  > maxTop)  dy = (maxTop - nb.top);

    noX += dx; noY += dy;

    const scale = tries >= 10 ? 0.88 : 1;
    noBtn.style.transform = `translate(${noX}px, ${noY}px) scale(${scale})`;
  }

  function moveNoRandomButSafe() {
    const x = Math.floor(Math.random()*220) - 110;
    const y = Math.floor(Math.random()*44)  - 22;
    noX = x; noY = y;
    noBtn.style.transform = `translate(${noX}px, ${noY}px)`;
    requestAnimationFrame(clampNoInside);
  }

  function showApologyBar(percent){
    barWrap.style.display = "block";
    bar.style.width = percent + "%";
  }

  function openPopup(){
    overlay.style.display = "flex";
    vibrate([80,40,80]);
  }
  function closePopup(){
    overlay.style.display = "none";
  }
  function forceYes(){
    closePopup();
    yesClicked();
  }

  function showToast(customText){
    if(!screenshotMode) return;
    toast.innerHTML = customText || `ğŸ“¸ Screenshot detected ğŸ‘€<br><b>Neel wins confirmed</b> ğŸ˜ğŸ‘‘<br><span style="font-size:12px;opacity:.9;">Evidence secured. Wife caught in 4K ğŸ˜‚</span>`;
    toast.style.display = "block";
    vibrate([90,40,90]);
    spawnHearts(14);
    clearTimeout(showToast._t);
    showToast._t = setTimeout(()=> toast.style.display="none", 5000);
  }

  // Only active AFTER YES:
  document.addEventListener("visibilitychange", ()=>{
    if(!screenshotMode) return;
    if (document.visibilityState === "hidden") {
      localStorage.setItem("ss_detected","1");
    } else {
      if (localStorage.getItem("ss_detected")==="1") {
        localStorage.removeItem("ss_detected");
        showToast("ğŸ“¸ Screenshot activity detected ğŸ‘€<br><b>Neel wins confirmed</b> ğŸ˜âœ…");
      }
    }
  });

  let pressTimer;
  document.addEventListener("touchstart", ()=>{
    if(!screenshotMode) return;
    pressTimer = setTimeout(()=> showToast(), 650);
  }, {passive:true});
  document.addEventListener("touchend", ()=> clearTimeout(pressTimer));

  function tryNo(){
    tries++;
    vibrate([50]);

    yesScale += 0.16;
    yesBtn.style.transform = `scale(${yesScale})`;

    moveNoRandomButSafe();

    // Text line stays under buttons (always)
    msg.innerText = `NO attempts: ${tries} â€” ${lines[tries % lines.length]}`;

    // Bar stages
    if (tries === 3) showApologyBar(25);
    if (tries === 4) showApologyBar(45);

    // Apology flowers stage (YOUR CHANGE)
    if (tries === 5) {
      showApologyBar(70);
      spawnFlowers(18);
      msg.innerText = `NO attempts: ${tries} â€” âœ… Apology flowers ğŸŒ¹`;
      vibrate([90,30,90]);
    }

    if (tries >= 6 && tries <= 8) {
      showApologyBar(80 + (tries-6)*7);
      spawnFlowers(6);
      msg.innerText = `NO attempts: ${tries} â€” âœ… Apology flowers ğŸŒ¹ (wife auto-approved) ğŸ‘‘ğŸ˜‚`;
    }

    if (tries >= 7 && !popupShown) {
      popupShown = true;
      setTimeout(openPopup, 350);
    }

    if (tries >= 10) {
      noBtn.textContent = "Ok queen ğŸ‘‘";
      showApologyBar(100);
      msg.innerText = `NO attempts: ${tries} â€” Alrightâ€¦ you win ğŸ˜­ press YES â¤ï¸`;
      requestAnimationFrame(clampNoInside);
    }
  }

  function yesClicked(){
    vibrate([120,40,120]);
    spawnHearts(40);

    setTimeout(() => {
      card.innerHTML = `
        <h1 style="margin:0 0 6px;">WIFE CONFIRMED âœ…ğŸ’–</h1>
        <p style="margin:0 0 6px;">Medam said YES ğŸ˜</p>
        <p style="margin:0 0 10px;"><b>Marriage rule update:</b> You are always right. Forever.</p>
        <p style="margin:0 0 14px;">Husband status: <b>Obsessed âœ…</b> | Wallet: <b>in danger ğŸ›’</b></p>

<img src="./Neel 2.jpeg"
     alt="Neel & Medam"
     style="width:100%;border-radius:14px;">

        <!-- Screenshot message appears ONLY at the end -->
        <div class="finalBadge" id="finalBadge">
          ğŸ“¸ Screenshot & tap here = <b>Neel wins</b> ğŸ˜
        </div>
      `;

      // Enable screenshot effects only now (after YES)
      screenshotMode = true;

      // Tap final badge shows toast (doesn't cover text)
      document.getElementById("finalBadge").addEventListener("click", ()=>{
        showToast();
      });

      // Show toast once automatically AFTER YES (at the end)
      setTimeout(()=> showToast("ğŸ“¸ Screenshot detected? <br><b>Neel wins confirmed</b> ğŸ˜ğŸ‘‘"), 800);
    }, 650);
  }

  window.addEventListener("load", () => {
    clampNoInside();
    window.addEventListener("resize", clampNoInside);
  });
</script>

</body>
</html>
